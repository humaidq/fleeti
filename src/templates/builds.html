{{ template "head" . }}

<div class="page-header">
  <h2>Builds</h2>
  <div class="page-header-actions">
    <a href="/" class="btn">Dashboard</a>
  </div>
</div>

<section class="section-card">
  <h3>Create Build from a Profile</h3>
  <p class="muted-text">Build creation now lives inside each profile under the Deployments tab.</p>
  <a href="/profiles" class="btn">Open Profiles</a>
</section>

<section class="section-card">
  <h3>Build Queue</h3>
  {{ if .Builds }}
  <div class="list-card-list">
    {{ range .Builds }}
    <div class="list-card list-card-clickable build-list-card">
      <a href="/profiles/{{ .ProfileID }}/builds/{{ .ID }}" class="list-card-link list-card-entry-link">
        <div class="list-card-entry">
          <span class="list-card-leading">
            <span class="list-card-icon" aria-hidden="true"><i class="fa-solid fa-hammer"></i></span>
          </span>
          <div class="list-card-entry-body">
            <div class="list-card-title">{{ .Version }}</div>
            <div class="list-card-meta build-list-meta">
              <span class="muted-text">Profile: {{ .ProfileName }} (r{{ .ProfileRevision }})</span>
              <span class="muted-text">Fleet: {{ if .FleetName }}{{ .FleetName }}{{ else }}-{{ end }}</span>
              <span class="muted-text">Build status: <span class="status-badge status-{{ .Status }}">{{ .Status }}</span></span>
              <span class="muted-text">Installer status: {{ if eq .InstallerStatus "not_requested" }}not_requested{{ else }}<span class="status-badge status-{{ .InstallerStatus }}">{{ .InstallerStatus }}</span>{{ end }}</span>
              <span class="muted-text">Created (UTC): {{ .CreatedAt }}</span>
            </div>
          </div>
        </div>
      </a>
    </div>
    {{ end }}
  </div>
  {{ else }}
  <p class="muted-text">No builds yet.</p>
  {{ end }}
</section>

{{ template "foot" . }}
